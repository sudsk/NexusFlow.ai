<svg viewBox="0 0 900 700" xmlns="http://www.w3.org/2000/svg">
  <!-- Background and borders -->
  <defs>
    <linearGradient id="headerGradient" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#e6f3ff;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#c6e2ff;stop-opacity:1" />
    </linearGradient>
    <filter id="dropShadow" x="-20%" y="-20%" width="140%" height="140%">
      <feGaussianBlur in="SourceAlpha" stdDeviation="2"/>
      <feOffset dx="2" dy="2" result="offsetblur"/>
      <feComponentTransfer>
        <feFuncA type="linear" slope="0.2"/>
      </feComponentTransfer>
      <feMerge> 
        <feMergeNode/>
        <feMergeNode in="SourceGraphic"/> 
      </feMerge>
    </filter>
  </defs>

  <!-- Layer 1: Frontend Layer -->
  <rect x="50" y="40" width="800" height="120" rx="8" fill="#e6f3ff" stroke="#4c6ef5" stroke-width="2" filter="url(#dropShadow)"/>
  <rect x="50" y="40" width="800" height="30" rx="8" fill="url(#headerGradient)" stroke="#4c6ef5" stroke-width="2"/>
  <text x="450" y="62" font-family="Arial" font-size="16" text-anchor="middle" font-weight="bold">Frontend Layer</text>

  <!-- Frontend Components -->
  <rect x="80" y="80" width="160" height="60" rx="5" fill="#c9e0ff" stroke="#4c6ef5" stroke-width="1.5"/>
  <text x="160" y="105" font-family="Arial" font-size="14" text-anchor="middle" font-weight="bold">Flow Designer</text>
  <text x="160" y="125" font-family="Arial" font-size="12" text-anchor="middle">React Flow</text>

  <rect x="270" y="80" width="160" height="60" rx="5" fill="#c9e0ff" stroke="#4c6ef5" stroke-width="1.5"/>
  <text x="350" y="105" font-family="Arial" font-size="14" text-anchor="middle" font-weight="bold">Agent Config</text>
  <text x="350" y="125" font-family="Arial" font-size="12" text-anchor="middle">Component</text>

  <rect x="460" y="80" width="160" height="60" rx="5" fill="#c9e0ff" stroke="#4c6ef5" stroke-width="1.5"/>
  <text x="540" y="105" font-family="Arial" font-size="14" text-anchor="middle" font-weight="bold">Flow Testing</text>
  <text x="540" y="125" font-family="Arial" font-size="12" text-anchor="middle">Console</text>

  <rect x="650" y="80" width="160" height="60" rx="5" fill="#c9e0ff" stroke="#4c6ef5" stroke-width="1.5"/>
  <text x="730" y="105" font-family="Arial" font-size="14" text-anchor="middle" font-weight="bold">Settings</text>
  <text x="730" y="125" font-family="Arial" font-size="12" text-anchor="middle">UI</text>

  <!-- Layer 2: API Gateway -->
  <rect x="50" y="185" width="800" height="70" rx="8" fill="#f5f5f5" stroke="#6c757d" stroke-width="2" filter="url(#dropShadow)"/>
  <rect x="50" y="185" width="800" height="30" rx="8" fill="#e9ecef" stroke="#6c757d" stroke-width="2"/>
  <text x="450" y="207" font-family="Arial" font-size="16" text-anchor="middle" font-weight="bold">API Gateway</text>

  <!-- API Gateway Components -->
  <rect x="90" y="225" width="120" height="20" rx="3" fill="#dee2e6" stroke="#6c757d" stroke-width="1"/>
  <text x="150" y="240" font-family="Arial" font-size="12" text-anchor="middle">Auth Middleware</text>

  <rect x="240" y="225" width="120" height="20" rx="3" fill="#dee2e6" stroke="#6c757d" stroke-width="1"/>
  <text x="300" y="240" font-family="Arial" font-size="12" text-anchor="middle">Flow Routes</text>

  <rect x="390" y="225" width="120" height="20" rx="3" fill="#dee2e6" stroke="#6c757d" stroke-width="1"/>
  <text x="450" y="240" font-family="Arial" font-size="12" text-anchor="middle">Execution Routes</text>

  <rect x="540" y="225" width="120" height="20" rx="3" fill="#dee2e6" stroke="#6c757d" stroke-width="1"/>
  <text x="600" y="240" font-family="Arial" font-size="12" text-anchor="middle">Tool Routes</text>

  <rect x="690" y="225" width="120" height="20" rx="3" fill="#dee2e6" stroke="#6c757d" stroke-width="1"/>
  <text x="750" y="240" font-family="Arial" font-size="12" text-anchor="middle">Settings Routes</text>

  <!-- Layer 3: Core Services Layer -->
  <rect x="50" y="280" width="800" height="150" rx="8" fill="#e8f5e9" stroke="#4caf50" stroke-width="2" filter="url(#dropShadow)"/>
  <rect x="50" y="280" width="800" height="30" rx="8" fill="#c8e6c9" stroke="#4caf50" stroke-width="2"/>
  <text x="450" y="302" font-family="Arial" font-size="16" text-anchor="middle" font-weight="bold">Core Services Layer</text>

  <!-- Service Components -->
  <rect x="90" y="325" width="160" height="85" rx="5" fill="#a5d6a7" stroke="#4caf50" stroke-width="1.5"/>
  <text x="170" y="350" font-family="Arial" font-size="14" text-anchor="middle" font-weight="bold">Flow Management</text>
  <text x="170" y="370" font-family="Arial" font-size="12" text-anchor="middle">Save, Load, Validate</text>
  <text x="170" y="390" font-family="Arial" font-size="12" text-anchor="middle">Convert, Export</text>

  <rect x="280" y="325" width="160" height="85" rx="5" fill="#a5d6a7" stroke="#4caf50" stroke-width="1.5"/>
  <text x="360" y="350" font-family="Arial" font-size="14" text-anchor="middle" font-weight="bold">Execution Service</text>
  <text x="360" y="370" font-family="Arial" font-size="12" text-anchor="middle">Invoke, Monitor</text>
  <text x="360" y="390" font-family="Arial" font-size="12" text-anchor="middle">Debug, Log</text>

  <rect x="470" y="325" width="160" height="85" rx="5" fill="#a5d6a7" stroke="#4caf50" stroke-width="1.5"/>
  <text x="550" y="350" font-family="Arial" font-size="14" text-anchor="middle" font-weight="bold">Authentication</text>
  <text x="550" y="370" font-family="Arial" font-size="12" text-anchor="middle">API Keys, Auth</text>
  <text x="550" y="390" font-family="Arial" font-size="12" text-anchor="middle">Permissions</text>

  <rect x="660" y="325" width="160" height="85" rx="5" fill="#a5d6a7" stroke="#4caf50" stroke-width="1.5"/>
  <text x="740" y="350" font-family="Arial" font-size="14" text-anchor="middle" font-weight="bold">Storage</text>
  <text x="740" y="370" font-family="Arial" font-size="12" text-anchor="middle">PostgreSQL</text>
  <text x="740" y="390" font-family="Arial" font-size="12" text-anchor="middle">Repository Pattern</text>

  <!-- Layer 4: Framework Adapter Layer -->
  <rect x="50" y="455" width="800" height="90" rx="8" fill="#fff3e0" stroke="#ff9800" stroke-width="2" filter="url(#dropShadow)"/>
  <rect x="50" y="455" width="800" height="30" rx="8" fill="#ffe0b2" stroke="#ff9800" stroke-width="2"/>
  <text x="450" y="477" font-family="Arial" font-size="16" text-anchor="middle" font-weight="bold">Framework Adapter Layer</text>

  <!-- Adapter Components -->
  <rect x="110" y="495" width="180" height="30" rx="5" fill="#ffcc80" stroke="#ff9800" stroke-width="1.5"/>
  <text x="200" y="515" font-family="Arial" font-size="14" text-anchor="middle" font-weight="bold">Adapter Interface</text>

  <rect x="320" y="495" width="180" height="30" rx="5" fill="#ffcc80" stroke="#ff9800" stroke-width="1.5"/>
  <text x="410" y="515" font-family="Arial" font-size="14" text-anchor="middle" font-weight="bold">Flow Converter</text>

  <rect x="530" y="495" width="180" height="30" rx="5" fill="#ffcc80" stroke="#ff9800" stroke-width="1.5"/>
  <text x="620" y="515" font-family="Arial" font-size="14" text-anchor="middle" font-weight="bold">Tool Registry</text>

  <!-- Layer 5: Framework Implementation Layer -->
  <rect x="50" y="570" width="800" height="90" rx="8" fill="#e8eaf6" stroke="#3f51b5" stroke-width="2" filter="url(#dropShadow)"/>
  <rect x="50" y="570" width="800" height="30" rx="8" fill="#c5cae9" stroke="#3f51b5" stroke-width="2"/>
  <text x="450" y="592" font-family="Arial" font-size="16" text-anchor="middle" font-weight="bold">Framework Implementation Layer</text>

  <!-- Framework Components -->
  <rect x="80" y="610" width="120" height="40" rx="5" fill="#9fa8da" stroke="#3f51b5" stroke-width="1.5"/>
  <text x="140" y="635" font-family="Arial" font-size="14" text-anchor="middle" font-weight="bold">LangGraph</text>

  <rect x="230" y="610" width="120" height="40" rx="5" fill="#9fa8da" stroke="#3f51b5" stroke-width="1.5"/>
  <text x="290" y="635" font-family="Arial" font-size="14" text-anchor="middle" font-weight="bold">CrewAI</text>

  <rect x="380" y="610" width="120" height="40" rx="5" fill="#9fa8da" stroke="#3f51b5" stroke-width="1.5"/>
  <text x="440" y="635" font-family="Arial" font-size="14" text-anchor="middle" font-weight="bold">AutoGen</text>

  <rect x="530" y="610" width="120" height="40" rx="5" fill="#9fa8da" stroke="#3f51b5" stroke-width="1.5"/>
  <text x="590" y="635" font-family="Arial" font-size="14" text-anchor="middle" font-weight="bold">DSPy</text>

  <rect x="680" y="610" width="120" height="40" rx="5" fill="#9fa8da" stroke="#3f51b5" stroke-width="1.5"/>
  <text x="740" y="635" font-family="Arial" font-size="14" text-anchor="middle" font-weight="bold">Custom/Other</text>

  <!-- Connection Lines -->
  <!-- Frontend to API Gateway -->
  <line x1="160" y1="140" x2="160" y2="185" stroke="#6c757d" stroke-width="1.5" stroke-dasharray="5,5"/>
  <line x1="350" y1="140" x2="350" y2="185" stroke="#6c757d" stroke-width="1.5" stroke-dasharray="5,5"/>
  <line x1="540" y1="140" x2="540" y2="185" stroke="#6c757d" stroke-width="1.5" stroke-dasharray="5,5"/>
  <line x1="730" y1="140" x2="730" y2="185" stroke="#6c757d" stroke-width="1.5" stroke-dasharray="5,5"/>

  <!-- API Gateway to Services -->
  <line x1="160" y1="255" x2="160" y2="280" stroke="#6c757d" stroke-width="1.5" stroke-dasharray="5,5"/>
  <line x1="300" y1="255" x2="300" y2="280" stroke="#6c757d" stroke-width="1.5" stroke-dasharray="5,5"/>
  <line x1="450" y1="255" x2="450" y2="280" stroke="#6c757d" stroke-width="1.5" stroke-dasharray="5,5"/>
  <line x1="600" y1="255" x2="600" y2="280" stroke="#6c757d" stroke-width="1.5" stroke-dasharray="5,5"/>
  <line x1="750" y1="255" x2="750" y2="280" stroke="#6c757d" stroke-width="1.5" stroke-dasharray="5,5"/>

  <!-- Services to Adapters -->
  <line x1="170" y1="410" x2="170" y2="455" stroke="#6c757d" stroke-width="1.5" stroke-dasharray="5,5"/>
  <line x1="360" y1="410" x2="360" y2="455" stroke="#6c757d" stroke-width="1.5" stroke-dasharray="5,5"/>
  <line x1="550" y1="410" x2="550" y2="455" stroke="#6c757d" stroke-width="1.5" stroke-dasharray="5,5"/>
  <line x1="740" y1="410" x2="740" y2="455" stroke="#6c757d" stroke-width="1.5" stroke-dasharray="5,5"/>

  <!-- Adapters to Frameworks -->
  <line x1="170" y1="525" x2="170" y2="570" stroke="#6c757d" stroke-width="1.5" stroke-dasharray="5,5"/>
  <line x1="360" y1="525" x2="360" y2="570" stroke="#6c757d" stroke-width="1.5" stroke-dasharray="5,5"/>
  <line x1="550" y1="525" x2="550" y2="570" stroke="#6c757d" stroke-width="1.5" stroke-dasharray="5,5"/>
  <line x1="740" y1="525" x2="740" y2="570" stroke="#6c757d" stroke-width="1.5" stroke-dasharray="5,5"/>

  <!-- Title -->
  <text x="450" y="25" font-family="Arial" font-size="20" text-anchor="middle" font-weight="bold">NexusFlow.ai Architecture</text>
</svg>
